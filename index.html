<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Crypto omn.pe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap"
      rel="stylesheet">
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body>
    <div class="stars"></div>

    <header>
      <div class="title">Encriptador Crypto omn.pe</div>
      <div class="subtitle">Encripta/desencripta individual y masivamente tus
        archivos</div>
    </header>
    <!-- Consola de logs -->
    <section class="card console-card" id="console-card">
      <div class="card-header" style="gap:12px; align-items:center;">
        <span class="badge">Logs</span>
        <h3 class="card-title">Consola</h3>
        <div
          style="margin-left:auto; display:flex; gap:10px; align-items:center;">
          <label class="chip"
            style="display:flex; align-items:center; gap:6px;">
            <input id="log-autoscroll" type="checkbox" checked />
            autoscroll
          </label>
          <button id="log-clear" class="ghost">Limpiar</button>
        </div>
      </div>
      <div id="console-body" class="console-body" role="log"
        aria-live="polite"></div>
    </section>

    <main class="grid">
      <!-- ENCRIPTAR -->
      <section class="card" id="card-encrypt">
        <div class="card-header">
          <span class="badge">AES-256-GCM</span>
          <h3 class="card-title">Encriptar archivo</h3>
        </div>
        <p class="card-desc">Sube un archivo y una contraseña y te devolverá el
          archivo encriptado.</p>
        <div class="card-body">
          <div class="field">
            <label for="enc-file">Archivo</label>
            <input id="enc-file" type="file" />
          </div>
          <div class="field">
            <label for="enc-pass">Contraseña</label>
            <input id="enc-pass" type="password" placeholder="••••"
              autocomplete="current-password" />
          </div>
          <div class="divider"></div>
          <div class="actions" style="display: flex; flex-direction: column;">
            <button id="enc-btn">Encriptar</button>
            <div class="progress" aria-live="polite" style="width: 100%;">
              <!-- barra visual -->
              <div class="visual-progress" id="enc-visual"
                style="border: 1px solid var(--accent); border-radius: 4px; width: 100%; overflow: hidden;"><div
                  class="fill"></div></div>
              <!-- barra nativa (oculta aquí, útil para accesibilidad) -->
              <progress id="enc-progress" value="0" max="100"></progress>
              <span id="enc-status" class="status">—</span>
            </div>
          </div>
          <div class="hint">La contraseña debe tener al menos 1 carácter.</div>
        </div>
        <div class="footer-hint">
          <span class="chip" style="font-size:x-small;">Agrega .enc al nombre
            original del archivo
            <code>Content-Disposition</code></span>
        </div>
      </section>

      <!-- DESENCRIPTAR -->
      <section class="card" id="card-decrypt">
        <div class="card-header">
          <span class="badge">AES-256-GCM</span>
          <h3 class="card-title">Desencriptar archivo</h3>
        </div>
        <p class="card-desc">Sube un archivo encriptado y su contraseña. Se
          descargará el original.</p>
        <div class="card-body">
          <div class="field">
            <label for="dec-file">Archivo .enc</label>
            <input id="dec-file" type="file" />
          </div>
          <div class="field">
            <label for="dec-pass">Contraseña</label>
            <input id="dec-pass" type="password" placeholder="••••"
              autocomplete="current-password" />
          </div>
          <div class="divider"></div>
          <div class="actions" style="display: flex; flex-direction: column;">
            <button id="dec-btn">Desencriptar</button>
            <div class="progress" aria-live="polite" style="width: 100%;">
              <!-- barra visual -->
              <div class="visual-progress" id="dec-visual"
                style="border: 1px solid var(--accent); border-radius: 4px; width: 100%; overflow: hidden;"><div
                  class="fill"></div></div>
              <!-- barra nativa (oculta aquí, útil para accesibilidad) -->
              <progress id="dec-progress" value="0" max="100"></progress>
              <span id="dec-status" class="status">—</span>
            </div>

          </div>
          <div class="hint">La contraseña debe tener al menos 1 carácter y el
            archivo debe tener extension .enc</div>
        </div>
        <div class="footer-hint">
          <span class="chip">Stream + % restante</span>
        </div>
      </section>

      <!-- ENCRIPTAMIENTO MASIVO -->
      <section class="card" id="card-massive">
        <div class="card-header">
          <span class="badge">ZIP stream</span>
          <h3 class="card-title">Encriptamiento masivo</h3>
        </div>
        <p class="card-desc">Sube múltiples archivos y un CSV
          (<em>file_name,password</em>) con las contraseñas.</p>
        <div class="card-body">
          <div class="field">
            <label for="mass-files">Archivos</label>
            <input id="mass-files" type="file" multiple />
          </div>
          <div class="field">
            <label for="mass-csv">CSV de contraseñas</label>
            <input id="mass-csv" type="file" accept=".csv,text/csv" />
          </div>
          <div class="divider"></div>
          <div class="actions" style="display: flex; flex-direction: column;">
            <button id="mass-btn">Encriptar archivos!</button>
            <div class="progress" aria-live="polite" style="width: 100%;">
              <!-- ✅ Barra visual -->
              <div class="visual-progress" id="mass-visual" aria-hidden="true"
                style="border: 1px solid var(--accent); border-radius: 4px; width: 100%; overflow: hidden;">
                <div class="fill"></div>
              </div>

              <!-- barra nativa (oculta en esta card pero útil para lectores de pantalla) -->
              <progress id="mass-progress" value="0" max="100"></progress>
              <span id="mass-status" class="status">—</span>
            </div>
          </div>
          <div class="hint">Se devolverá un ZIP en streaming.</div>
        </div>
        <div class="footer-hint">
          <span class="chip">Backpressure-friendly</span>
        </div>
      </section>
    </main>

    <script type="module" src="./app.js"></script>
  </body>
</html>
